# ============================================================================
# Prismify - AI-Powered SEO SaaS Platform
# Environment Variables Configuration
# ============================================================================
# Copy this file to `.env` and fill in your actual values
# NEVER commit `.env` to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# APPLICATION SETTINGS (Required for MVP)
# ----------------------------------------------------------------------------
APP_NAME=Prismify
NODE_ENV=development
PORT=3000
API_VERSION=v1
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3001

# ----------------------------------------------------------------------------
# DATABASE - PostgreSQL via Supabase (Required - P0)
# ----------------------------------------------------------------------------
# Get this from your Supabase project settings -> Database -> Connection String
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/prismify

# Alternative: Local PostgreSQL settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=prismify
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=20

# SSL Settings (MUST be true for Supabase)
DB_SSL_ENABLED=false
DB_SSL_REJECT_UNAUTHORIZED=true

# ----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY (Required - P0)
# ----------------------------------------------------------------------------
# CRITICAL: Generate secure secrets using `node scripts/generate-secrets.js`
# These MUST be changed in production!
JWT_SECRET=your-super-secret-jwt-key-min-32-characters
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-characters
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Password Security
BCRYPT_ROUNDS=12

# CORS Configuration (comma-separated origins)
CORS_ORIGIN=http://localhost:3001

# ----------------------------------------------------------------------------
# AI SERVICES (Required - P0)
# ----------------------------------------------------------------------------
# Primary AI Provider: Google Gemini (FREE TIER - 60 requests/min)
# Get your API key from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-2.5-flash-lite
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.7

# Fallback AI Providers (Optional but recommended)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o

# AI Provider Preference (gemini, anthropic, openai)
AI_PROVIDER=gemini

# ----------------------------------------------------------------------------
# PAYMENT PROCESSING - Stripe (Required for MVP)
# ----------------------------------------------------------------------------
# Get from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Price IDs (create products in Stripe Dashboard first)
# After creating products with monthly/annual pricing, copy price IDs here
STRIPE_PRICE_STARTER_MONTHLY=price_starter_monthly_id
STRIPE_PRICE_STARTER_ANNUAL=price_starter_annual_id
STRIPE_PRICE_PROFESSIONAL_MONTHLY=price_professional_monthly_id
STRIPE_PRICE_PROFESSIONAL_ANNUAL=price_professional_annual_id
STRIPE_PRICE_AGENCY_MONTHLY=price_agency_monthly_id
STRIPE_PRICE_AGENCY_ANNUAL=price_agency_annual_id

# ----------------------------------------------------------------------------
# EMAIL SERVICE (Required for user onboarding)
# ----------------------------------------------------------------------------
# Email Provider (resend or sendgrid)
EMAIL_PROVIDER=resend

# Resend (recommended for MVP - 3,000 emails/month free)
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key
EMAIL_FROM=noreply@prismify.com
EMAIL_FROM_NAME=Prismify

# SendGrid (alternative email provider)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@prismify.com
SENDGRID_FROM_NAME=Prismify

# ----------------------------------------------------------------------------
# SEO AGENT CONFIGURATION (Core Platform Functionality)
# ----------------------------------------------------------------------------
# Enable/Disable SEO Agent
AGENT_SEO_ENABLED=true

# SEO Agent Runtime
AGENT_MAX_CONCURRENT_TASKS=5
AGENT_TASK_TIMEOUT=300000
AGENT_RETRY_ATTEMPTS=3

# ----------------------------------------------------------------------------
# RATE LIMITING & API QUOTAS (Required for Production)
# ----------------------------------------------------------------------------
# Default rate limits (adjust based on pricing tiers)
RATE_LIMIT_WINDOW_MS=3600000
RATE_LIMIT_MAX_REQUESTS=1000

# Per-tier API call limits (requests per month)
TIER_STARTER_MONTHLY_LIMIT=500
TIER_PROFESSIONAL_MONTHLY_LIMIT=5000
TIER_ENTERPRISE_MONTHLY_LIMIT=50000

# ----------------------------------------------------------------------------
# REDIS - Caching & Job Queue (Optional for MVP, Required for Scale)
# ----------------------------------------------------------------------------
# Leave empty for MVP (will use in-memory storage)
# For production: Use Upstash Redis (free tier available)
REDIS_URL=
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ----------------------------------------------------------------------------
# MONITORING & ANALYTICS (Recommended for Launch)
# ----------------------------------------------------------------------------
# Error Tracking - Sentry (free tier available)
SENTRY_DSN=

# Application Logging
LOG_LEVEL=info

# Analytics - PostHog or Mixpanel (optional)
POSTHOG_API_KEY=
MIXPANEL_TOKEN=

# ----------------------------------------------------------------------------
# FEATURE FLAGS (MVP Configuration)
# ----------------------------------------------------------------------------
ENABLE_USER_REGISTRATION=true
ENABLE_API_DOCS=true
ENABLE_DEBUG_LOGGING=false

# ============================================================================
# QUICK START GUIDE FOR PRISMIFY
# ============================================================================
# 
# STEP 1: SETUP SUPABASE (5 minutes)
# -------------------------------------
# 1. Create account at https://supabase.com
# 2. Create new project (choose free tier)
# 3. Copy DATABASE_URL from Settings -> Database
# 4. Run migrations: npm run migrate
# 
# STEP 2: GENERATE SECRETS (1 minute)
# -------------------------------------
# Run: node scripts/generate-secrets.js
# Copy the generated secrets to JWT_SECRET and JWT_REFRESH_SECRET
# 
# STEP 3: GET GEMINI API KEY (2 minutes)
# -------------------------------------
# 1. Visit https://makersuite.google.com/app/apikey
# 2. Create API key (FREE - 60 requests/min)
# 3. Copy to GEMINI_API_KEY
# 
# STEP 4: TEST LOCALLY (1 minute)
# -------------------------------------
# npm install
# npm run dev
# Visit http://localhost:3000/api/v1/health
# 
# TOTAL SETUP TIME: ~10 minutes
# 
# ============================================================================
# MVP LAUNCH REQUIREMENTS (Additional Setup)
# ============================================================================
# 
# Before launching to customers, also configure:
# 
# 1. STRIPE (Payments)
#    - Sign up at https://stripe.com
#    - Get test keys from dashboard
#    - Configure webhook endpoint
# 
# 2. RESEND (Email)
#    - Sign up at https://resend.com
#    - Verify your sending domain
#    - Get API key (3,000 emails/month free)
# 
# 3. PRODUCTION SECRETS
#    - Generate new secrets for production
#    - Store in secure vault (not in code)
#    - Enable DB_SSL_ENABLED=true
# 
# 4. MONITORING
#    - Set up Sentry for error tracking
#    - Configure SENTRY_DSN
# 
# ============================================================================
# SECURITY BEST PRACTICES
# ============================================================================
# 
# ✅ DO:
# - Generate secrets with: node scripts/generate-secrets.js
# - Use different secrets for dev/staging/production
# - Store production secrets in AWS Secrets Manager or similar
# - Set restrictive file permissions: chmod 600 .env
# - Rotate secrets every 90 days
# - Enable MFA on all third-party services
# 
# ❌ DON'T:
# - Commit .env to git (it's in .gitignore)
# - Share secrets in Slack/email
# - Use the same secrets across environments
# - Hard-code secrets in application code
# - Leave default/example secrets in production
# 
# ============================================================================
