# ============================================================================
# Prismify - AI-Powered SEO Platform
# Environment Variables Configuration
# ============================================================================
# Copy this file to `.env` and fill in your actual values
# NEVER commit `.env` to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# APPLICATION SETTINGS (Required for MVP)
# ----------------------------------------------------------------------------
APP_NAME=Prismify
NODE_ENV=development
PORT=3000
API_VERSION=v1
APP_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3001
ADMIN_URL=http://localhost:3002

# ----------------------------------------------------------------------------
# DATABASE - PostgreSQL (Required - P0)
# ----------------------------------------------------------------------------
# Use Supabase connection string or local PostgreSQL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:your_password@localhost:5432/prismify

# Individual connection settings (fallback if DATABASE_URL not used)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=prismify
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=2000

# SSL Settings (set to true for production/Supabase)
DB_SSL_ENABLED=false
DB_SSL_REJECT_UNAUTHORIZED=true

# ----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY (Required - P0)
# ----------------------------------------------------------------------------
# CRITICAL: Generate secure secrets using `node scripts/generate-secrets.js`
# These MUST be changed in production!
JWT_SECRET=your-super-secret-jwt-key-min-32-characters
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-characters
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Session & Password Security
SESSION_SECRET=your-session-secret-min-32-characters
BCRYPT_ROUNDS=12

# Multi-Factor Authentication
ADMIN_MFA_REQUIRED=false

# CORS Configuration (comma-separated origins)
CORS_ORIGIN=http://localhost:3001,http://localhost:3002

# CSRF Protection
CSRF_ENABLED=true
CSP_REPORT_URI=/api/v1/security/csp-report

# ----------------------------------------------------------------------------
# REDIS - Caching & Queue (Optional for MVP, Required for Production)
# ----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ----------------------------------------------------------------------------
# AI SERVICES (Required - P0)
# ----------------------------------------------------------------------------
# Primary AI Provider: Google Gemini (FREE TIER - Recommended)
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-2.5-flash-lite
GEMINI_MAX_TOKENS=8192
GEMINI_TEMPERATURE=0.7

# Alternative AI Providers (Optional - for fallback)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# AI Provider Preference (gemini, anthropic, openai)
AI_PROVIDER=gemini

# ----------------------------------------------------------------------------
# PAYMENT PROCESSING - Stripe (Required for MVP)
# ----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# ----------------------------------------------------------------------------
# EMAIL SERVICE (Required for user onboarding)
# ----------------------------------------------------------------------------
# SendGrid (recommended for MVP)
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@prismify.com
SENDGRID_FROM_NAME=Prismify

# ----------------------------------------------------------------------------
# RATE LIMITING (Important for Production)
# ----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=3600000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_ADMIN_MAX=10000

# ----------------------------------------------------------------------------
# AGENT CONFIGURATION (SEO Platform Core)
# ----------------------------------------------------------------------------
# Enable/Disable Specific Agents
AGENT_COO_ENABLED=true
AGENT_CRAWLER_ENABLED=true
AGENT_RESEARCH_ENABLED=true
AGENT_WRITER_ENABLED=true
AGENT_QUALITY_CONTROL_ENABLED=true
AGENT_SEO_ENABLED=true
AGENT_PUBLISHER_ENABLED=true
AGENT_ANALYTICS_ENABLED=true

# Agent Runtime Configuration
AGENT_MAX_CONCURRENT_TASKS=5
AGENT_TASK_TIMEOUT=300000
AGENT_RETRY_ATTEMPTS=3

# ----------------------------------------------------------------------------
# FEATURE FLAGS (MVP Configuration)
# ----------------------------------------------------------------------------
ENABLE_WEBSOCKETS=true
ENABLE_GRAPHQL=false
ENABLE_NEWSLETTER=true
ENABLE_COMMENTS=false
ENABLE_USER_REGISTRATION=true
ENABLE_API_DOCS=true
ENABLE_DEBUG_LOGGING=false
ENABLE_SEED_DATA=false

# ----------------------------------------------------------------------------
# OPTIONAL SERVICES (Not Required for MVP)
# ----------------------------------------------------------------------------

# Elasticsearch (Full-text search)
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=changeme

# Vector Database (Semantic search)
VECTOR_DB_TYPE=qdrant
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=

# Pinecone Alternative
PINECONE_API_KEY=
PINECONE_ENVIRONMENT=

# News APIs (Content research)
GOOGLE_NEWS_API_KEY=
SERPAPI_KEY=
NEWSAPI_KEY=
MEDIASTACK_API_KEY=
NEWS_CACHE_TTL=300
NEWS_DEFAULT_LIMIT=20

# Image Generation (Content enhancement)
DALLE_API_KEY=
STABILITY_API_KEY=

# Cloud Storage
# Cloudflare
CLOUDFLARE_API_KEY=
CLOUDFLARE_ZONE_ID=

# AWS S3
AWS_S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1

# Analytics & Tracking
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# Monitoring & Error Tracking
SENTRY_DSN=
LOG_LEVEL=debug
DATADOG_API_KEY=

# ============================================================================
# QUICK START GUIDE
# ============================================================================
# 
# MINIMUM REQUIRED FOR LOCAL DEVELOPMENT:
# 1. DATABASE_URL (or individual POSTGRES_* vars)
# 2. JWT_SECRET and JWT_REFRESH_SECRET (generate with script)
# 3. GEMINI_API_KEY (free tier from Google AI Studio)
# 
# MINIMUM REQUIRED FOR MVP LAUNCH:
# - All of the above, plus:
# 4. STRIPE_SECRET_KEY, STRIPE_PUBLISHABLE_KEY, STRIPE_WEBHOOK_SECRET
# 5. SENDGRID_API_KEY (or alternative email service)
# 6. SESSION_SECRET
# 
# PRODUCTION CHECKLIST:
# - Change all *_SECRET values to cryptographically secure random strings
# - Set NODE_ENV=production
# - Enable DB_SSL_ENABLED=true
# - Set REDIS_URL to production Redis instance
# - Configure CORS_ORIGIN to your production domains
# - Set LOG_LEVEL=info or warn
# - Enable monitoring (SENTRY_DSN)
# 
# ============================================================================
# SECURITY NOTES
# ============================================================================
# 
# - NEVER commit .env files to version control
# - Use strong, random secrets (min 32 characters)
# - Rotate secrets regularly in production
# - Use environment-specific .env files (.env.production, .env.staging)
# - Store production secrets in secure vault (AWS Secrets Manager, etc.)
# - Limit access to .env files (chmod 600)
# 
# Generate secure secrets: node scripts/generate-secrets.js
# 
# ============================================================================
